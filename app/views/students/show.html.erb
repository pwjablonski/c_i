<div class="page-header ribbon-top">
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
          <h1><%= @student.first_name %> <%= @student.last_name %> (<%=@student.profile_name%>)</h1>
     </div> 
    </div>
  </div>
</div>

<div class="page-header">
  <div class="container">
    <% flash.each do |name, msg| -%>
     <div class="alert alert-success alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
          <%= msg %> 
     </div>
    <%end%>

    <% @student.enrollments.each do |enrollment|%>
      <% if enrollment.is_verified == false %>
        <div class="alert alert-success alert-dismissable">
          <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <%= form_tag verify_classroom_enrollments_path(enrollment.classroom) do %>
              <%= hidden_field_tag :enrollment_id, enrollment.id %>
              <%= submit_tag "Accept Enrollment Request" %>
            <% end %> 
             <%= link_to 'Decline Enrollment Request', [enrollment.classroom, enrollment], method: :delete, data: { confirm: 'Are you sure?' } %>
       </div>
      <% end%>
    <%end%>

    <div class="row">
       <div class="col-lg-3">
            <%= image_tag @student.user.image, :height => "100px", :class => "user-image img-rounded img-responsive"%>
      </div>

      <div class="col-lg-3">
            <h3> "<%= @student.about_me %>"</h3> 
            <p> <span class="fa fa-university"></span> <%= @student.school.school_name %></p>
            <p> <span class="fa fa-user"></span>  Front End Developer</p> 
            <p> <span class="fa fa-map-marker"></span>   New York, New York</p> 

            <% if current_user.try(:admin?) || current_user == @student.user%> 
            <p> 
              <span class="fa fa-edit"></span> <%= link_to "Edit Profile", edit_student_path(@student)%> 
            </p>
            <%end%>
      </div>


      <div class="col-lg-3">
            <h3> Overview </h3>
            <p><%= @ca_datum.total_points %> CA Points </p>
            <p><%= @student.projects.count %> C/I Projects </p>
            <p><%= @student.user.public_repos.count %> Repositiories on Github </p>
      </div>

      <div class="col-md-3">
            <h3> Developer Toolbox </h3>
            <a href='https://github.com/<%=@student.github_username%>' class="btn btn-social-icon btn-github">
                <span class="fa fa-github"></span>
            </a>

            <a href='https://www.codecademy.com/<%=@student.codecademy_username %>' class="btn btn-social-icon btn-instagram">
                <span class="fa fa-code"></span>
                
            </a>

            <a href='https://devpost.com/<%=@student.devpost_username%>' class="btn btn-social-icon btn-reddit">
              <img src = "http://nealrs.github.io/devpost-follow-button/icon/devpost-32.png">         
            </a>

            <a href='https://c9.io/<%=@student.cloud9_username%>' class="btn btn-social-icon btn-reddit">
              <%=image_tag "c9-logo.png" %>       
            </a>
      </div>

    </div>
  
  </div> 
</div>


<div class="container">
  <div class="row">
    
    <div class="col-lg-12"> 
      <ul class="nav nav-pills nav-justified">
        <li class="active"><a data-toggle="pill" href="#home"><i class="fa fa-tasks"></i> Progress</a></li>
        <li><a data-toggle="pill" href="#menu1"><i class="fa fa-folder"></i>  Projects</a></li>
        <li><a data-toggle="pill" href="#menu2"><i class="fa fa-calendar"></i>   Events</a></li>
        <li><a data-toggle="pill" href="#menu3"><i class="fa fa-trophy"></i>  Awards</a></li>
      </ul>
    </div>
      
      <div class="tab-content">
        <div id="home" class="tab-pane fade in active">
          <div class="col-lg-12"> 
          <%= line_chart @student.ca_data.group_by_day(:created_at, time_zone: "Eastern Time (US & Canada)", range: @student.ca_data.first.created_at..Time.now).maximum(:total_points) %>
          </div>
        </div>

        <div id="menu1" class="tab-pane fade">
          <div class="col-lg-12"> 
          
          <% if current_user.try(:admin?) || current_user == @student.user%>
          <h3>  <%= link_to "Create a New Project", new_project_path, :class => "btn btn-primary"%> </h3>
          <% end%> 
          </div>

          <% @student.projects.each do |project| %>
          
              <div class="col-lg-3"> 
                 <div class="panel panel-default">

                  <div class="panel-body panel-project">
                    <h3><%= link_to project.name, project%></h3>
                    <p><%= project.tag_line %> </p>
                  </div>
                    
                    <div class="panel-footer">
                      <% if current_user.try(:admin?) || current_user == @student.user%> 
                      <%= link_to 'Remove', project, method: :delete, data: { confirm: 'Are you sure?' } %>
                      <%end%>
                    </div>
                </div>
              </div> 
          <% end %>
        </div>
        <div id="menu2" class="tab-pane fade">
                    
          
        </div>
        
        <div id="menu3" class="tab-pane fade">
          <div class="col-lg-12"> 
          
          <h3>  C/I Badges  </h3>
         
          </div>
          

            <% @badges.each do |badge| %>
            
                <div class="col-lg-2"> 
                   <div class="panel panel-default">
                   
                    <div class="panel-body panel-project">
                      <%= image_tag badge["image"], :class => "img-responsive" %>
                    </div>

                  </div>
                </div> 
                <% end %>
            
          </div>
        </div>
      </div>
    
  </div>
</div>